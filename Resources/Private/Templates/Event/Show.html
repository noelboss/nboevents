<f:layout name="Landscape" />
<f:section name="main">
	<f:flashMessages />
	<f:if condition="{event.reservations}">
		<f:then>
			<h1>{event.eventnr} – {event.course.title}
				<span>
					{event.date -> f:format.date(format:"d.m.Y – G:i")}
					<strong>
					{event.count} Anmeldungen
					</strong>
				</span>
			</h1>
			<table class="event-list tablesorter table-striped table-hover tablesorter-ice" data-sort="[[0,0],[1,0]]">
				<thead>
					<tr>
						<th style="width: 12%;">Name</th>
						<th style="width: 8%;">Vorname</th>
						<th style="width: 15%;">Adresse</th>
						<th data-sorter="false" style="width: 115px">Telefon</th>
						<th style="width: 15%;">E-Mail</th>
						<th style="width: 17%;" data-sorter="false">Bemerkungen</th>
						<th style="width: 20px;">#</th>
						<th style="width: 60px">Status</th>
					</tr>
				</thead>
				<tbody>
					<f:for each="{event.reservations}" as="reservation">
						<tr class="linked" data-href="<f:uri.action action='show' pluginName='persons' pageUid='51' controller='Reservation' arguments='{reservation: reservation}' />">
							<td class="highlight">
								{reservation.person.lastname}
							</td>
							<td class="highlight">
								{reservation.person.firstname}
							</td>
							<td>
								<f:format.nl2br>{reservation.person.address}</f:format.nl2br>
							</td>
							<td>
								<f:if condition="{reservation.person.phone}">
									T: {reservation.person.phone}<br/>
								</f:if>
								<f:if condition="{reservation.person.phonemobile}">
									M: {reservation.person.phonemobile}<br/>
								</f:if>
								<f:if condition="{reservation.person.phonecompany}">
									F: {reservation.person.phonecompany}
								</f:if>
							</td>
							<td>
								<f:if condition="{reservation.person.email}">
									<a href="mailto:{reservation.person.email}">{reservation.person.email}</a>
								</f:if>
							</td>
							<td style="font-size: 0.9em;">
								{reservation.notes}
							</td>
							<td>
								{reservation.count}
							</td>
							<td>
								<f:if condition="{reservation.payed}">
									<span style="display:none;">a{reservation.payed -> f:format.date(format:'ymd')}</span>
									{reservation.payed -> f:format.date(format:'d.m.y')} <i class="icon-ok"></i><br />
								</f:if>
								<f:if condition="{reservation.billsent}">
									<f:then>
										<span style="display:none;">b{reservation.billsent -> f:format.date(format:'ymd')}</span>
										{reservation.billsent -> f:format.date(format:'d.m.y')} <i class="icon-print"></i><br/>
									</f:then>
									<f:else>
										<span style="display:none;">unbearbeitet</span> <i class="icon-remove"></i>
									</f:else>
								</f:if>
							</td>
						</tr>
					</f:for>
				</tbody>
			</table>
		</f:then>
		<f:else>
			<h1>{event.eventnr} – {event.course.title}
				<span>{event.date -> f:format.date(format:"d. m. Y – G:i")}</span>
			</h1>
			<p class="alert alert-info">
				Es sind keine Anmeldungen für diesen Kurs vorhanden.
			</p>
		</f:else>
	</f:if>
	<div class="footer">
		<f:if condition="{event.reservations}">
			<span class="btn pull-right print">
				Drucken
				<i class="icon-print"></i>
			</span>
		</f:if>
		<f:link.page class="btn"><i class="icon-arrow-left"></i> Kurslisten</f:link.page>
	</div>
</f:section>